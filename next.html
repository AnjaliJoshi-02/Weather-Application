<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Air Quality Monitoring System</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: linear-gradient(to bottom, #1e3c72, #2a5298);
      color: #fff;
      min-height: 100vh;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      background-color: rgba(0, 0, 0, 0.5);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-container img {
      width: 60px;
      height: 60px;
    }

    .logo-container h1 {
      font-size: 1.8rem;
      text-shadow: 1px 1px 3px #000;
    }

    @media (max-width: 600px) {
      .logo-container h1 {
        font-size: 1.3rem;
      }

      .logo-container img {
        width: 45px;
        height: 45px;
      }
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body1 {
      background: linear-gradient(to right, #6dd5fa, #2980b9);
      color:;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 2rem;
      width:100%;
    }

    .card {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      backdrop-filter: blur(20px);
      padding: 2rem 3rem;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
      /* max-width: 400px; */
      width: 100%;
      height: 250px;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      
    }

    .location {
      font-size: 1.2rem;
      margin-bottom: 1rem;
      font-weight: bold;
      color: white;
    }

    .temperature {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1rem;
      color: white;
    }

    .comment {
      font-size: 1.1rem;
      color: #f0f0f0;
    }

    .loader {
      margin-top: 2rem;
      font-size: 1rem;
    }

    .body2 {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f4f8;
      color: #333;
    }

    header {
      background:#1e3c72;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }

    .block-container {
      display: flex;
      justify-content: center;
      gap: 110px;
      padding: 40px 20px;
      flex-wrap: wrap;
    }

    .block {
      background:#6dd5fa;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 30px;
      width: 170px;
      text-align: center;
      /* cursor: pointer; */
      /* transition: transform 0.1s, background 0.1s; */
    }

    .block:hover {
      transform: translateY(-9px);
      background:#f0f0f0;
    }

    .block h2 {
      font-size: 18px;
      margin: 0;
      color:#333;
    }

    @media (max-width: 600px) {
      .block-container {
        flex-direction: column;
        align-items: center;
      }
    }

    .map-button {
      position: fixed;
      top: 20%;
      right: 20px;
      transform: translateY(-50%);
      background-color: #2b6cb0;
      color: white;
      border: none;
      border-radius: 30px;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: background-color 0.3s ease;
      text-decoration: ;
    }

    .map-button:hover {
      background-color: #1e4e8c;
      animation: blink 1s infinite;

    }
    @keyframes map {
      0% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }
    .map-icon {
      font-size: 20px;
    }
    .body6 {
      margin: 0;
      padding: 20px;
      font-family: 'Poppins', sans-serif;
      background-color:#1e4e8c;
    }
    .h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 40px;
      color:#f0f0f0;
    }
    .container3 {
      max-width: 1000px;
      margin: auto;
      background:#6dd5fa;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    canvas {
      width: 100% !important;
      height: 400px !important;
    }
    .scrolling-container {
      width: 100%;
      height: 60px;
      overflow: hidden;
      background:black;
      padding: 80px 0; /* More vertical space */
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .scrolling-track {
      display: flex;
      gap: 40px; /* closer gap between blocks */
      animation: moveTrack 50s linear infinite; /* slightly faster */
      align-items: center;
    }

    .info-block {
      min-width: 100px; /* narrower */
      min-height: 40px; 
      background:#1e4e8c;
      border-radius: ;
      padding: 30px 20px;
      text-align: center;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
      transition: transform 0.4s ease, box-shadow 0.4s ease, background 0.4s;
      flex-shrink: 0;
      cursor: pointer;
    }

    .info-block h3 {
      margin-bottom: 18px;
      font-size: 1.5rem;
      color: #00c6ff;
    }

    .info-block p {
      font-size: 1rem;
      color: #ccc;
      line-height: 1.5;
    }

    .info-block:hover {
      background: #2a2a2a;
    }

    @keyframes moveTrack {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    @media (max-width: 700px) {
      .info-block {
        min-width: 100px;
        min-height: 250px;
        padding: 20px 15px;
      }
    }
        .body6 {
      margin: 0;
      padding: 20px;
      background-color: #243750;
      font-family: 'Poppins', sans-serif;
    }
    .container {
      max-width: 650px;
      margin-top: 50px;
      margin-left: 25%;
      background:rgb(5, 122, 169);
      padding: 30px;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(26, 60, 81, 0.1);
      text-align: center;
    }
    h1 {
      color: #222;
      margin-bottom: 10px;
    }
    p {
      font-size: 1rem;
      color: #666;
      margin-bottom: 25px;
    }
    input[type="number"] {
      width: 80%;
      padding: 12px;
      margin: 10px 0;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid lightskyblue;
      outline: none;
      transition: border 0.3s;
    }
    input[type="number"]:focus {
      border: 1px solid cornflowerblue;
    }
    .result {
      margin-top: 20px;
      font-size: 1.8rem;
      font-weight: bold;
    }
    .explanation {
      margin-top: 10px;
      font-size: 1rem;
      font-weight: 500;
    }
    .emoji {
      font-size: 3rem;
      margin-top: 10px;
    }
    .progress-container {
      width: 100%;
      height: 20px;
      background: #ddd;
      border-radius: 10px;
      margin-top: 20px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: cornflowerblue;
      border-radius: 10px;
      transition: width 0.5s ease, background 0.5s ease;
    }
    table {
      margin-top: 30px;
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color:lightcyan;
      color:cornflowerblue;
    }
    .download-btn {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: 300;
      background-color:lightcyan;
      color:cornflowerblue;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      input[type="number"] {
        width: 100%;
      }
      .container {
        padding: 20px;
      }
      table {
        font-size: 0.8rem;
      }
    }
    .footer {
  background-color: #222;
  color: #fff;
  text-align: center;
  padding: 15px 0;
  position:relative;
  margin-bottom: 90;
  width: 100%;
  font-size: 14px;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.2);
}

  </style>
</head>
<body>

  <header>
    <div class="logo-container">
      <img src="https://img.icons8.com/fluency/96/air-quality.png" alt="AQ Logo">
      <h1 style="color: white;">Air Quality Monitoring System</h1>
    </div>
  </header>
  <div class="body1">
    <div class="card" id="weather-card">
      <h1 style="color: #00c6ff;">üåç Current Weather At Your Location</h1>
      <p class="loader" id="loading">Fetching location & weather data...</p>
      <div id="weather-info" style="display: none;">
        <p class="location" id="location-name"></p>
        <p class="temperature" id="temperature"></p>
        <p class="comment" id="weather-comment"></p>
        <div class="map">
          <a href="home.html"  class="map-button">
            <span class="map-icon">üó∫Ô∏è</span>
           Use Map
          </a>
          </div>
      </div>
    </div>
  </div>
  <!-- <div class="map"> -->
  <!-- <a href="index.html"  class="map-button"> -->
    <!-- <span class="map-icon">üó∫Ô∏è</span> -->
   <!-- Use Map -->
  </a>
  </div>
  <!-- Example Map Section -->
    <script>
      const apiKey = 'e748141885544335881f36f0e55bf061'; 
  
      function getWeatherComment(temp) {
        if (temp < 10) return "‚ùÑÔ∏è It's chilly out there. Stay warm!";
        if (temp < 20) return "üå§Ô∏è Cool and comfortable weather.";
        if (temp < 30) return "‚òÄÔ∏è Nice and warm day!";
        if (temp < 40) return "ü•µ Quite hot, keep hydrated!";
        return "üî• Scorching heat! Stay inside if possible!";
      }
  
      function showWeather(city, temp) {
        document.getElementById('location-name').textContent = `üìç Location: ${city}`;
        document.getElementById('temperature').textContent = `üå°Ô∏è Temperature: ${temp}¬∞C`;
        document.getElementById('weather-comment').textContent = getWeatherComment(temp);
        document.getElementById('loading').style.display = 'none';
        document.getElementById('weather-info').style.display = 'block';
      }
  
      function fetchWeather(lat, lon) {
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;
  
        fetch(url)
          .then(res => res.json())
          .then(data => {
            const city = data.name;
            const temp = data.main.temp;
            showWeather(city, temp);
          })
          .catch(err => {
            document.getElementById('loading').textContent = "Failed to fetch weather data.";
            console.error(err);
          });
      }
  
      function getLocationAndWeather() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              const lat = position.coords.latitude;
              const lon = position.coords.longitude;
              fetchWeather(lat, lon);
            },
            (error) => {
              document.getElementById('loading').textContent = "Location access denied.";
            }
          );
        } else {
          document.getElementById('loading').textContent = "Geolocation not supported.";
        }
      }
  
      getLocationAndWeather();
    </script>

  <script>
    function handleClick(parameter) {
      alert(`Want to check ${parameter}`);
      // You can redirect or load data here instead of alert.
    }
  </script>
  </div>

  <div class="body6">
    <div class="h1">Air Quality System Dashboard</div>
  
    <div class="container3">
      <canvas id="combinedChart"></canvas>
    </div>
  
    <script>
      const labels = [];
      const dataSets = {
        precip: [],
        humidity: [],
        co2: [],
        airspeed: []
      };
    const ctx = document.getElementById('combinedChart').getContext('2d');
    const combinedChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [
          {
            type: 'bar',  // bar chart for precipitation
            label: 'Precipitation (mm)',
            data: dataSets.precip,
            backgroundColor: 'pink',
            borderColor: 'red',
            borderWidth: 1
          },
          {
            type: 'bar',
            label: 'Humidity (%)',
            data: dataSets.humidity,
            borderColor: '#00BCD4',
            backgroundColor: 'brown',
            fill: false,
            tension: 0.4,
            pointRadius: 3
          },
          {
            type: 'bar',
            label: 'CO‚ÇÇ (ppm)',
            data: dataSets.co2,
            borderColor: '#9C27B0',
            backgroundColor: 'darkblue',
            fill: false,
            tension: 0.4,
            pointRadius: 3
          },
          {
            type: 'bar',
            label: 'Air Speed (km/h)',
            data: dataSets.airspeed,
            borderColor: '#FFC107',
            backgroundColor: 'orange',
            fill: false,
            tension: 0.4,
            pointRadius: 3
          }
        ]
      },
      options: {
        responsive: true,
        interaction: {
          mode: 'index',
          intersect: false
        },
        stacked: false,
        plugins: {
          title: {
            display: true,
            text: 'Live Sensor Data Chart'
          }
        },
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    // Fetch sensor data
    async function fetchSensorData() {
      try {
        const response = await fetch('https://mocki.io/v1/ce0d748d-b13d-4d83-8409-6e4e3820e99c'); // Mock API
        const data = await response.json();

        const now = new Date();
        const timeLabel = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;

        if (labels.length >= 10) labels.shift();
        labels.push(timeLabel);

        if (dataSets.precip.length >= 10) dataSets.precip.shift();
        dataSets.precip.push(data.precip);

        if (dataSets.humidity.length >= 10) dataSets.humidity.shift();
        dataSets.humidity.push(data.humidity);

        if (dataSets.co2.length >= 10) dataSets.co2.shift();
        dataSets.co2.push(data.co2);

        if (dataSets.airspeed.length >= 10) dataSets.airspeed.shift();
        dataSets.airspeed.push(data.airspeed);

        combinedChart.update();
      } catch (error) {
        console.error('Error fetching sensor data:', error);
      }
    }

    // Initial call and periodic updates
    fetchSensorData();
    setInterval(fetchSensorData, 5000);
  </script>


 <br><br> 
  <div class="scrolling-container">
    <div class="scrolling-track" id="scrolling-track">
      <div class="info-block">
        <h3>CO‚ÇÇ (ppm)</h3>
        <p>Carbon dioxide concentration measured in parts per million.<br>
             High CO‚ÇÇ indicates poor air quality and can cause discomfort or drowsiness.</p>
      </div>

      <div class="info-block">
        <h3>PM2.5 (¬µg/m¬≥)</h3>
        <p>Fine particulate matter smaller than 2.5 micrometers.<br> Exposure can lead
             to health problems such as respiratory and cardiovascular issues.</p>
      </div>

      <div class="info-block">
        <h3>Humidity (%)</h3>
        <p>The percentage of water vapor present in the air.<br> Impacts comfort levels, 
            sensor readings, and atmospheric conditions.</p>
      </div>

      <div class="info-block">
        <h3>Precipitation (mm)</h3>
        <p>The amount of rainfall or snowfall measured in millimeters. <br>
            Affects air cleansing, atmospheric pressure, and pollutant dispersion.</p>
      </div>

      <div class="info-block">
        <h3>Wind (m/s)</h3>
        <p>The speed of wind movement across an area. Strong winds can <br>
            disperse pollutants and impact temperature regulation.</p>
      </div>

      <div class="info-block">
        <h3>Velocity of Air Speed (m/s)</h3>
        <p>The rate of air movement, vital for analyzing <br>
            ventilation and air quality management in both indoor
             and outdoor environments.</p>
      </div>
    </div>
  </div>
  <script>
    const track = document.getElementById('scrolling-track');
    const blocks = document.querySelectorAll('.info-block');

    let paused = false;

    function checkCenter() {
      if (paused) return;

      const containerRect = document.querySelector('.scrolling-container').getBoundingClientRect();

      blocks.forEach((block) => {
        const rect = block.getBoundingClientRect();
        const blockCenter = rect.left + rect.width / 2;
        const containerCenter = containerRect.left + containerRect.width / 2;

        if (Math.abs(blockCenter - containerCenter) < 20) {
          paused = false;
          track.style.animationPlayState = 'paused';
          block.style.transform = 'scale(1.15)';
          block.style.boxShadow = '0 12px 32px rgba(0,0,0,0.6)';

          setTimeout(() => {
            block.style.transform = 'scale(1)';
            block.style.boxShadow = '0 8px 24px rgba(0,0,0,0.5)';
            track.style.animationPlayState = 'running';
            paused = false;
          }, 2000);
        }
      });
    }

    setInterval(checkCenter, 100);
  </script>


<div class="body6">
<div class="container">
  <h1>Air Quality AI Predictor</h1>
  <p style="color: #00c6ff;">Live prediction based on CO‚ÇÇ and PM2.5 levels.</p>

  <input type="number" id="co2" placeholder="Enter CO‚ÇÇ Level (ppm)" oninput="predict()">
  <input type="number" id="pm25" placeholder="Enter PM2.5 Level (¬µg/m¬≥)" oninput="predict()"> 

  <div class="result" id="predictionResult">Predicted AQI: --</div>
  <div class="emoji" id="emoji">üôÇ</div>
  <div class="explanation" id="explanationText"></div>

  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <table id="historyTable">
    <thead>
      <tr>
        <th>Time</th>
        <th>CO‚ÇÇ (ppm)</th>
        <th>PM2.5 (¬µg/m¬≥)</th>
        <th>Predicted AQI</th>
        <th>Status</th>
        <th>Emoji</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <button class="download-btn" onclick="downloadCSV()">Download CSV</button>
  <!-- <button class="delete-btn" onclick="deleteHistory()">Delete History</button> -->

</div>

<script>
  let model;

  async function createModel() {
    model = tf.sequential();
    model.add(tf.layers.dense({ units: 10, activation: 'relu', inputShape: [2] }));
    model.add(tf.layers.dense({ units: 1 }));

    model.compile({
      optimizer: 'adam',
      loss: 'meanSquaredError'
    });

    const xs = tf.tensor2d([
      [400, 10], [500, 20], [600, 30], [700, 40],
      [800, 50], [900, 60], [1000, 70], [1100, 80]
    ]);
    const ys = tf.tensor2d([
      [50], [80], [110], [140],
      [170], [200], [230], [260]
    ]);

    await model.fit(xs, ys, { epochs: 200 });
    console.log('Model trained');
  }

  async function predict() {
    if (!model) return;

    const co2 = parseFloat(document.getElementById('co2').value);
    const pm25 = parseFloat(document.getElementById('pm25').value);

    if (isNaN(co2) || isNaN(pm25)) return;

    const input = tf.tensor2d([[co2, pm25]]);
    const prediction = model.predict(input);
    const predictedAQI = Math.round((await prediction.data())[0]);

    const { text, color, emoji } = getAQIExplanation(predictedAQI);

    document.getElementById('predictionResult').innerText = `Predicted AQI: ${predictedAQI}`;
    document.getElementById('explanationText').innerText = text;
    document.getElementById('emoji').innerText = emoji;
    document.getElementById('predictionResult').style.color = color;
    document.getElementById('explanationText').style.color = color;
    document.getElementById('progressBar').style.background = color;
    document.getElementById('progressBar').style.width = Math.min(predictedAQI / 3, 100) + "%";

    // Save to history table
    addToHistory(new Date().toLocaleTimeString(), co2, pm25, predictedAQI, text, emoji);
  }

  function getAQIExplanation(aqi) {
    if (aqi <= 50) {
      return { text: "Good", color: "#00e400", emoji: "üòÉ" };
    } else if (aqi <= 100) {
      return { text: "Moderate", color: "#ffff00", emoji: "üôÇ" };
    } else if (aqi <= 150) {
      return { text: "Unhealthy for Sensitive", color: "#ff7e00", emoji: "üòê" };
    } else if (aqi <= 200) {
      return { text: "Unhealthy", color: "#ff0000", emoji: "üò∑" };
    } else if (aqi <= 300) {
      return { text: "Very Unhealthy", color: "#8f3f97", emoji: "ü§¢" };
    } else {
      return { text: "Hazardous", color: "#7e0023", emoji: "üò°" };
    }
  }

  function addToHistory(time, co2, pm25, aqi, status, emoji) {
    const table = document.getElementById('historyTable').getElementsByTagName('tbody')[0];
    const newRow = table.insertRow();
    newRow.innerHTML = `
      <td>${time}</td>
      <td>${co2}</td>
      <td>${pm25}</td>
      <td>${aqi}</td>
      <td>${status}</td>
      <td>${emoji}</td>
    `;
  }

  function downloadCSV() {
    let csv = "Time,CO‚ÇÇ (ppm),PM2.5 (¬µg/m¬≥),Predicted AQI,Status,Emoji\n";
    const rows = document.querySelectorAll("#historyTable tbody tr");

    rows.forEach(row => {
      const cols = row.querySelectorAll("td");
      const rowData = Array.from(cols).map(col => col.innerText).join(",");
      csv += rowData + "\n";
    });

    const hiddenElement = document.createElement('a');
    hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURIComponent(csv);
    hiddenElement.target = '_blank';
    hiddenElement.download = 'air_quality_predictions.csv';
    hiddenElement.click();
  }

  createModel();


</script>
</div>
<footer class="footer">
  <p>&copy; 2025 Anjali Joshi. All Rights Reserved.</p>
</footer>

</body>
</html>
